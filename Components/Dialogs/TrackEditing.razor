@using Ongaku.Models

<MudDialog>
	<TitleContent>Editing @track.Title</TitleContent>
	<DialogContent>
		<MudStack Style="width: 100%;" Class="d-flex flex-column gap-4 align-center">
			<div class="d-flex flex-column gap-2">
				<MudImage Width="300" Class="rounded-lg" ObjectFit="ObjectFit.Cover"
				Src="@track.CoverPath" FallbackSrc="assets/teto_cover.png" />
			</div>

			<MudTextField Style="width: 80%; min-width: 20rem;" Label="Title" @bind-Value="@_title" Variant="Variant.Outlined"/>

			<MudTextField Style="width: 80%; min-width: 20rem;" Label="Artist" @bind-Value="@_artist!.Name" Variant="Variant.Outlined" />

		</MudStack>
	</DialogContent>
	<DialogActions>
		<MudToolBar Gutters="true" Class="relative d-flex justify-end gap-4">
			<MudButton Color="Color.Secondary" Variant="Variant.Filled">
				Save
			</MudButton>
			<MudButton Color="Color.Error" Variant="Variant.Filled">
				Cancel
			</MudButton>
		</MudToolBar>
	</DialogActions>
</MudDialog>

@code {
	[Parameter]
	public required Track track { get; set; }

	private string _title = "";
	private Artist? _artist;

	protected override void OnParametersSet()
	{
		_title = track.Title;
		_artist = track.Artist;
	}
}
